//Домашнее задание.Task.
//Задача.
//Создайте 4 метода.
//Первый:Принимает два параметра и возвращает сумму
//Второй:Выводит текст на консоль:“На далекой планете в галактике Гиперион, где небеса были...
//Третий:Выводит факториал числа 9
//Четвертый:Записывает текст, переданный в параметре, в текстовый файл:
//“Каждый день на планете Гиперион был особенным для блоглорпов. Они
//проводили свои утренние ритуалы, слушая мелодии, которые...
//Все эти методы должны выполняться параллельно, но так как у нас один из методов должен возвращать результат, основной поток придется останавливать, чтобы получить его, передать в переменную и вывести на экран.

using System;
using System.IO;
using System.Threading.Tasks;

// Запуск методов параллельно
Task<int> sumTask = SumAsync(5, 10); // Пример параметров
Task printTask = PrintTextAsync();
Task factTask = PrintFactAsync(9);
Task writeTask = WriteTextToFileAsync("Каждый день на планете Гиперион был особенным для блоглорпов. Они\r\nпроводили свои утренние ритуалы, слушая мелодии, которые\r\nцветы-композиторы создавали для них на дне океанов. Каждый аккорд и\r\nнота наполняли воздух магией и вдохновением.\r\nОднако, однажды, вечером, когда блоглорпы собрались вокруг своих\r\nдеревьев-домов, они заметили нечто необычное - на небе появилась\r\nзвезда, которую они никогда раньше не видели. Она сверкала\r\nослепительно и меняла цвета от синего до зеленого, создавая\r\nпотрясающее световое шоу.\r\nБлоглорпы ощутили, что это было знаком судьбы, и отправились в\r\nпуть к источнику этой новой звезды. Во время своего путешествия они\r\nвстретили музыкальных китов, которые сообщили им, что эта звезда -\r\nключ к магии вселенной и тайнам времени. Она предоставляла\r\nуникальную возможность путешествия во времени и пространстве.\r\nБлоглорпы решили использовать этот дар мудро и с благоразумием.\r\nОни отправились в путешествие сквозь временной вихрь и открыли\r\nперед собой несметные возможности и приключения. Они исследовали\r\nпрошлое и будущее, встречали разные цивилизации и учились у мудрых\r\nстарейшин разных эпох.\r\nНо всегда, в конце каждого своего путешествия, блоглорпы\r\nвозвращались домой, к своим деревьям из кристаллов и\r\nцветам-композиторам, чтобы поделиться своими удивительными\r\nисториями и мелодиями с музыкальными китами.\r\nТак продолжалась жизнь блоглорпов на Гиперионе, где каждый день был\r\nновым приключением, а магия вселенной и тайны времени оставались\r\nих вечными спутниками.");

// Ожидание завершения метода, возвращающего результат
int sumResult = await sumTask;
Console.WriteLine($"Сумма: {sumResult}");

// Ожидание завершения остальных задач
await Task.WhenAll(printTask, factTask, writeTask);


static async Task<int> SumAsync(int a, int b)
{
    return await Task.FromResult(a + b);
}

static async Task PrintTextAsync()
{


    Console.WriteLine("На далекой планете в галактике Гиперион, где небеса были разукрашены яркими звездами и лазурными небесами, жили странны существа, известные как блоглорпы.Блоглорпы были маленькими,пушистыми созданиями с шестиугольными глазами и тройными хвостами.Их домами были деревья, выращенные из кристаллов, и они питались музыкой, которую производили цветы, растущие на дне их океанов.Вечными друзьями блоглорпов были музыкальные киты,которые пели им мелодии о магии вселенной и тайнах времени.");


}

static async Task PrintFactAsync(int number)
{
    await Task.Run(() =>
    {
        long fact = 1;
        for (int i = 1; i <= number; i++)
        {
            fact *= i;
        }
        Console.WriteLine($"Факториал числа {number}: {fact}");
    });
}

static async Task WriteTextToFileAsync(string text)
{
    try
    {
        await File.WriteAllTextAsync("output.txt", text);
    }
    catch (Exception ex)
    {
        Console.WriteLine($"Ошибка при записи в файл: {ex.Message}");
    }
}